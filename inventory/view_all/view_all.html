<div class="all_inv_main">

  <div style="margin-top:20px; font-size:1.8em">
    All Beverages Database
  </div>

  <div class="hint_text" style="margin-top:8px;">
    Use this spreadsheet to maintain a list of all inventory items your
    restaurant carries.
  </div>

  <div ng-show="show_add_ui===true" class="add_inv_all" style="margin-top:10px">
    <button ng-click="hideAddInv()" type="button" class="btn btn-default btn-sm inner_btn_left" style="font-size:14px; min-height:32px;">
      <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
    </button>
    <div style="margin-left:10px; font-size:1.4em; display:inline-block">
      Add New Beverage to DB
    </div>
    
    <div style="font-size:1.1em; color:#88bb99; margin-top:16px">
      Basic Info
    </div>
    <hr class="add_hr"/>
    <div style="padding-left:12px; padding-right:24px; margin-top:12px">
      <div class="row">
        <div class="col-xs-4">
          <div class="form-group" ng-class="{'has-error': form_ver.error_product===true}">
            <label class="control-label"> Product </label>
            <input ng-model="new_product" class="form-control input_add" placeholder="e.g., Trumer Pils">
          </div>
        </div>
        <div class="col-xs-4">
          <div class="form-group" ng-class="{'has-error': form_ver.error_distributor===true}">
            <label class="control-label"> Distributor </label>
            <input ng-model="new_distributor" class="form-control input_add" placeholder="e.g., California Beer & Beverage">
          </div>
        </div>
        <div class="col-xs-4">
          <div class="form-group" ng-class="{'has-error': form_ver.error_brewery===true}">
            <label class="control-label"> Brewery </label>
            <input ng-model="new_brewery" class="form-control input_add" placeholder="e.g., Lagunitas Brewing Company">
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-4">
          <div class="form-group" ng-class="{'has-error': form_ver.error_type===true}">
            <label class="control-label"> Type </label>
            <select ng-model="new_type" class="form-control input_add" ng-options="atype for atype in alcohol_types" style="width:150px;"></select>
          </div>
        </div>
        <div class="col-xs-4">
          <div class="form-group" ng-class="{'has-error': form_ver.error_abv===true}">
            <label class="control-label"> 
              % AbV 
              <span class="glyphicon glyphicon-question-sign" style="font-size:18px; color:#88ccdd;" ng-click="showAbVHelp()"></span>
            </label>
            <div class="input-group">
              <input ng-model="new_abv" type="number" min="0" max="100" class="form-control input_add" placeholder="" style="width:100px">
              <span class="input-group-addon" style="width:30px; text-align:left;">%</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div style="font-size:1.1em; color:#88bb99; margin-top:8px">
      Purchase / Order Info
      <span class="glyphicon glyphicon-question-sign" style="font-size:18px; color:#88ccdd" ng-click="showPurchaseHelp()"></span>
    </div>
    <hr class="add_hr"/>
    <div style="padding-left:12px; padding-right:24px; margin-top:12px">
      <div class="row">
        <div class="col-xs-4">
          <div class="form-group" ng-class="{'has-error': form_ver.error_pvolume===true || form_ver.error_punit===true}">
            <label class="control-label"> 
              Purchase Volume
            </label>
            <div>
              <input ng-model="new_purchase_volume" type="number" min="0" class="form-control input_add" style="width:100px; margin-right:6px; float:left">
            </div>
            <div>
              <select ng-model="new_purchase_unit" class="form-control input_add" ng-options="aunit for aunit in volume_units" style="width:60px; float:left"></select>
            </div>
          </div>
        </div>
        <div class="col-xs-4">
          <div class="form-group" ng-class="{'has-error': form_ver.error_pcost===true}">
            <label class="control-label"> 
              Purchase Cost
            </label>
            <div class="input-group">
              <span class="input-group-addon">$</span>
              <input ng-model="new_purchase_cost" type="number" min="0" class="form-control input_add" style="width:100px;">
            </div>
          </div>
        </div>
        <div class="col-xs-4" ng-show="new_type==='Draft Beer' || new_type==='draft beer'">
          <div class="form-group">
            <label class="control-label">
              Keg Deposit (optional)
              <span class="glyphicon glyphicon-question-sign" style="font-size:18px; color:#88ccdd;" ng-click="showKegHelp()"></span>
            </label>
            <div class="input-group" style="float:left; width:170px">
              <span class="input-group-addon">$</span>
              <input ng-model="new_deposit" type="number" min="0" class="form-control input_add" style="width:132px;" placeholder="">
            </div>
          </div>
        </div>
      </div>
    </div>

    <div style="font-size:1.1em; color:#88bb99; margin-top:8px">
      Sales & Pricing
      <span class="glyphicon glyphicon-question-sign" style="font-size:18px; color:#88ccdd" ng-click="showSalesHelp()"></span>
    </div>
    <hr class="add_hr"/>
    <div style="padding-left:12px; padding-right:24px; margin-top:12px">
      <div class="row" style="margin-bottom:4px">
        <div class="col-xs-4">
          Serving Size
        </div>
        <div class="col-xs-4">
          Retail Price
        </div>
      </div>
      <div ng-repeat="add_sale in add_sales" class="row" style="margin-bottom:0px">
        <div class="col-xs-4">
          <div class="form-group" ng-class="{'has-error': form_ver.errors_sale_volume[$index]===true}">
            <input ng-model="add_sale.volume" type="number" min="0" class="form-control input_add" style="width:100px; margin-right:6px; float:left">
            <div>
              <select ng-model="add_sale.unit" class="form-control input_add" ng-options="aunit for aunit in volume_units" style="width:60px; float:left"></select>
            </div>
          </div>
        </div>
        <div class="col-xs-4">
          <div class="form-group" ng-class="{'has-error': form_ver.errors_sale_price[$index]===true}">
            <div class="input-group">
              <span class="input-group-addon">$</span>
              <input ng-model="add_sale.price" type="number" min="0" class="form-control input_add" style="width:100px;">
            </div>
          </div>
        </div>
        <div class="col-xs-4">
          <button ng-show="add_sales.length !== 1" ng-click="removeSaleRow($index)" type="button" class="btn btn-default btn-sm add_transparent_btn" style="font-size:14px; height:32px">
            <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
          </button>
          <button ng-show="$index===add_sales.length-1" ng-click="addSaleRow(add_sales[$index].unit)" type="button" class="btn btn-default btn-sm add_transparent_btn" style="font-size:14px; margin-left:6px">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Row
          </button>
        </div>
      </div>
    </div>

    <div style="margin-bottom:32px"></div>
    <div ng-show="new_success_msg !== null" class="add_row" style="padding-left:12px; margin-bottom:0px">
      <div class="alert alert-success alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
        {{new_success_msg}}</div>
    </div>
    <div ng-show="new_failure_msg !== null" class="add_row" style="padding-left:12px; margin-bottom:0px">
      <div class="alert alert-danger" role="alert">
        {{new_failure_msg}}</div>
    </div>
    <div class="add_row" style="padding-left:12px;">
      <button ng-click="addNewItem()" type="button" class="btn btn-success btn-xl" style="font-size:16px; padding:12px">
        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Save & Add Beverage
      </button>
    </div>
  </div>

  <div style="margin-bottom:6px; margin-top:24px; float:left">
    <div style="float:left; min-width:140px">
      <button ng-show="show_add_ui===false" ng-click="showAddInv()" type="button" class="btn btn-success btn-sm" style="font-size:14px;">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> New Beverage
      </button>
    </div>
    <div style="float:left; width:200px;">
      <input ng-model="all_inv_query" class="form-control input-md" placeholder="Search Inventory...">
    </div>
  </div>

  <div class="label_row">
    <div class="all_inv_label_span noselect" style="width:60px;">
      <span style="margin-left:6px; font-weight:normal"> </span>
    </div
    ><div class="all_inv_label_span noselect" style="width:200px;">
      <div class="sort_div" ng-click="sortBy('product')">
        <span>Product</span>
        <span ng-show="sort_key === 'product'" class="glyphicon sort_carat" ng-class="{'glyphicon-menu-down': double_sort<0, 'glyphicon-menu-up':double_sort>0}"></span>
      </div>
    </div
    ><div class="all_inv_label_span noselect" style="width:200px;">
      <div class="sort_div" ng-click="sortBy('distributor')">
        <span>Distributor</span>
        <span ng-show="sort_key === 'distributor'" class="glyphicon sort_carat" ng-class="{'glyphicon-menu-down': double_sort<0, 'glyphicon-menu-up':double_sort>0}"></span>
      </div>
    </div
    ><div class="all_inv_label_span noselect" style="width:200px;">
      <div class="sort_div" ng-click="sortBy('brewery')">
        <span>Brewery</span>
        <span ng-show="sort_key === 'brewery'" class="glyphicon sort_carat" ng-class="{'glyphicon-menu-down': double_sort<0, 'glyphicon-menu-up':double_sort>0}"></span>
      </div>
    </div
    ><div class="all_inv_label_span noselect" style="width:80px;">
      <div class="sort_div" ng-click="sortBy('alcohol_type')">
        <span>Type</span>
        <span ng-show="sort_key === 'alcohol_type'" class="glyphicon sort_carat" ng-class="{'glyphicon-menu-down': double_sort<0, 'glyphicon-menu-up':double_sort>0}"></span>
      </div>
    </div
    ><div class="all_inv_label_span noselect" style="width:80px;">
      <div class="sort_div" ng-click="sortBy('abv')">
        <span>% AbV</span>
        <span ng-show="sort_key === 'abv'" class="glyphicon sort_carat" ng-class="{'glyphicon-menu-down': double_sort<0, 'glyphicon-menu-up':double_sort>0}"></span>
      </div>
    </div
    ><div class="all_inv_label_span noselect" style="width:120px;">
      <div class="sort_div" ng-click="sortBy('purchase_volume')">
        <span>Purchase Vol.</span>
        <span ng-show="sort_key === 'purchase_volume'" class="glyphicon sort_carat" ng-class="{'glyphicon-menu-down': double_sort<0, 'glyphicon-menu-up':double_sort>0}"></span>
      </div>
    </div
    ><div class="all_inv_label_span noselect" style="width:70px;">
      <div class="sort_div" ng-click="sortBy('purchase_unit')">
        <span>P. Unit</span>
        <span ng-show="sort_key === 'purchase_unit'" class="glyphicon sort_carat" ng-class="{'glyphicon-menu-down': double_sort<0, 'glyphicon-menu-up':double_sort>0}"></span>
      </div>
    </div
    ><div class="all_inv_label_span noselect" style="width:80px;">
      <div class="sort_div" ng-click="sortBy('purchase_cost')">
        <span>P. Cost</span>
        <span ng-show="sort_key === 'purchase_cost'" class="glyphicon sort_carat" ng-class="{'glyphicon-menu-down': double_sort<0, 'glyphicon-menu-up':double_sort>0}"></span>
      </div>
    </div
    ><div class="all_inv_label_span noselect" style="width:110px;">
      <div class="sort_div" ng-click="sortBy('deposit')">
        <span>Keg Deposit</span>
        <span ng-show="sort_key === 'deposit'" class="glyphicon sort_carat" ng-class="{'glyphicon-menu-down': double_sort<0, 'glyphicon-menu-up':double_sort>0}"></span>
      </div>
    </div
    ><div class="all_inv_label_span noselect" style="width:120px;">
      <div class="sort_div" ng-click="sortBy('flavor_profile')">
        <span>Flavor Profile</span>
        <span ng-show="sort_key === 'flavor_profile'" class="glyphicon sort_carat" ng-class="{'glyphicon-menu-down': double_sort<0, 'glyphicon-menu-up':double_sort>0}"></span>
      </div>
    </div
    ><div class="all_inv_span" style="width:100px;">Serving Size</div
    ><div class="all_inv_span" style="width:100px;">Retail Price</div
    ><div class="all_inv_label_span noselect" style="width:90px;">
      <div class="sort_div" ng-click="sortBy('count')">
        <span>Inventory</span>
        <span ng-show="sort_key === 'count'" class="glyphicon sort_carat" ng-class="{'glyphicon-menu-down': double_sort<0, 'glyphicon-menu-up':double_sort>0}"></span>
      </div>
    </div
  ></div>
  <div ng-repeat="inv in inventory_items | filter:all_inv_query">
    <div ng-class-even="'inv_row inv_row_even'" ng-class-odd="'inv_row'">
      <div class="all_inv_span" style="width:60px; text-align:center;">
        <button ng-click="editBeverage($index)" type="button" class="btn btn-md" style="font-size:14px; background-color:#ecfddf; border-color:#aaddbb">
          <span class="glyphicon glyphicon-pencil" style="font-size:16px; color:#888888"></span>
        </button>
      </div
      ><div class="all_inv_span" style="width:200px;">{{inv.product}}</div
      ><div class="all_inv_span" style="width:200px;">{{inv.distributor}}</div
      ><div class="all_inv_span" style="width:200px;">{{inv.brewery}}</div
      ><div class="all_inv_span" style="width:80px;">{{inv.alcohol_type}}</div
      ><div class="all_inv_span" style="width:80px;">{{inv.abv}}</div
      ><div class="all_inv_span" style="width:120px;">{{inv.purchase_volume}}</div
      ><div class="all_inv_span" style="width:70;">{{inv.purchase_unit}}</div
      ><div class="all_inv_span" style="width:80px;">$ {{inv.purchase_cost}}</div
      ><div class="all_inv_span" style="width:110px;">$ {{inv.deposit}}</div
      ><div class="all_inv_span" style="width:120px;">{{inv.flavor_profile}}</div
      ><div class="all_inv_span" style="width:100px;">
        <div ng-repeat="sp in inv.size_prices" style="padding:2px 0px">{{sp.volume}} {{sp.unit}}</div
      ></div
      ><div class="all_inv_span" style="width:100px;">
        <div ng-repeat="sp in inv.size_prices" style="padding:2px 0px">$ {{sp.price}}</div
      ></div
      ><div class="all_inv_span" style="width:90px;">{{inv.count}}</div
    ></div>
  </div>
  <div class="all_inv_bottom"></div>

</div>

<div ng-include src="'./view_all/edit_inv_modal.html'">
 
